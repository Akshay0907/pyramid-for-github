"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[743],{2743:(Q,d,a)=>{a.r(d),a.d(d,{ConveyanceSummaryModule:()=>x});var c=a(9808),m=a(2047),l=a(2382),e=a(1223),u=a(9783),w=a(3163),M=a(5742),p=a(4534),g=a(845),h=a(5787),v=a(1424),y=a(4297),f=a(7773),C=a(8952),S=a(5652),T=a(5315),Z=a(4132),A=a(7102),F=a(6526),b=a(4119);function D(n,i){1&n&&(e.TgZ(0,"tr")(1,"th",31)(2,"div",32),e._uU(3," Employee Code "),e.qZA()(),e.TgZ(4,"th",31)(5,"div",32),e._uU(6," Staff Name "),e.qZA()(),e.TgZ(7,"th",33)(8,"div",34),e._uU(9," Branch "),e.qZA()(),e.TgZ(10,"th",35)(11,"div",32),e._uU(12," Total Distance "),e.qZA()(),e.TgZ(13,"th",31)(14,"div",32),e._uU(15," Total Duration "),e.qZA()(),e.TgZ(16,"th",31)(17,"div",32),e._uU(18," Total Reimbursement Amount "),e.qZA()(),e._UZ(19,"th",36),e.qZA(),e._UZ(20,"tr"))}const U=function(n,i){return{OnLeave:n,Present:i}};function _(n,i){if(1&n&&(e.TgZ(0,"tr",37)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA()()),2&n){const t=i.$implicit;e.Q6J("ngClass",e.WLB(7,U,1==t.onLeave,0==t.onLeave)),e.xp6(2),e.Oqu(t.employeeCode),e.xp6(2),e.Oqu(t.staffName),e.xp6(2),e.Oqu(t.branch),e.xp6(2),e.hij("",t.totalDistance," km"),e.xp6(2),e.Oqu(t.totalDuration),e.xp6(2),e.hij("\u20b9 ",t.totalReimbursementAmount,"")}}function L(n,i){1&n&&(e.TgZ(0,"div",44),e._uU(1," Please enter Leave option "),e.qZA())}function N(n,i){if(1&n&&(e.TgZ(0,"form",38),e._UZ(1,"img",39),e.TgZ(2,"div",40)(3,"label",41),e._uU(4,"Leave"),e.qZA(),e._UZ(5,"p-selectButton",42),e.YNc(6,L,2,0,"div",43),e.qZA()()),2&n){const t=e.oxw();e.Q6J("formGroup",t.editAttendenceForm),e.xp6(1),e.MGl("src","assets/layout/images/","pyramidlogo",".jpg",e.LSH),e.xp6(4),e.Q6J("options",t.leave),e.xp6(1),e.Q6J("ngIf",!t.editAttendenceForm.controls.onLeave.valid&&t.submitted)}}function J(n,i){}const I=function(){return["Date","employeeCode","Staff_Name","In","Out","status"]},P=function(){return[10,20,30]},R=function(){return[10,20,30,50]},O=function(){return{width:"450px"}};let q=(()=>{class n{constructor(t,o,s){this.messageService=t,this.conveyanceService=o,this.branchService=s,this.submitted=!1,this.productDialog=!1,this.productDialogForEdit=!1,this.deleteProductDialog=!1,this.deleteProductsDialog=!1,this.attendenceObjectForSelectedDelete="",this.selectedAttendence=[],this.ids=new Array,this.eventa={page:0,rows:10,searchString:"",sortBy:"id",sortOrder:"ascending",branch:[],role:"",conveyanceApplicable:"",dateFrom:(0,c.p6)(new Date((new Date).getFullYear(),(new Date).getMonth(),1),"yyyy-MM-dd","en-US"),dateTo:(0,c.p6)(new Date,"yyyy-MM-dd","en-US"),onLeave:""},this.branchList=[],this.filterDialog=!1}ngOnInit(){this.dateFromFilterVariable=new Date((new Date).getFullYear(),(new Date).getMonth(),1),this.dateToFilterVariable=new Date,console.log((0,c.p6)(new Date,"yyyy-MM-dd","en-US")),this.getAttendances(this.eventa),this.branchService.getBranchList2().subscribe(t=>{this.branchList=t,console.log(this.branchList),console.log("response",t)}),this.leave=[{label:"On Leave",value:"true"},{label:"Present",value:"false"}],this.editAttendenceForm=new l.cw({id:new l.NI(""),startTime:new l.NI("",[l.kI.required]),endTime:new l.NI("",[l.kI.required]),onLeave:new l.NI("",[l.kI.required]),reasonForLeave:new l.NI("",[l.kI.required]),employeeAttendance:new l.NI("",[l.kI.required]),dateCreated:new l.NI("",[l.kI.required]),lastUpdated:new l.NI("",[l.kI.required])})}clearAllFilters(){this.eventa.branch=[],this.eventa.dateFrom=(0,c.p6)(new Date((new Date).getFullYear(),(new Date).getMonth(),1),"yyyy-MM-dd","en-US"),this.eventa.dateTo=(0,c.p6)(new Date,"yyyy-MM-dd","en-US"),this.eventa.onLeave="",this.getAttendances(this.eventa),this.dateFromFilterVariable=new Date((new Date).getFullYear(),(new Date).getMonth(),1),this.dateToFilterVariable=new Date,this.branchFilterVariable="",this.leaveFilterVariable=""}forSearch(t){this.eventa.searchString=t.target.value,this.getAttendances(this.eventa)}branchFilter(t){console.log(t),this.getAttendances(this.eventa)}dateToFilter(t){this.eventa.dateTo=(0,c.p6)(t,"yyyy-MM-dd","en-US"),console.log(this.eventa),console.log(t),this.getAttendances(this.eventa),console.log(this.eventa)}dateFromFilter(t){this.eventa.dateFrom=(0,c.p6)(t,"yyyy-MM-dd","en-US"),console.log(this.eventa),console.log(t),this.getAttendances(this.eventa)}leaveFilter(t){this.eventa.onLeave=t.value.value,this.getAttendances(this.eventa),console.log(t)}hideOrShowFilter(){this.filterDialog=!this.filterDialog,console.log(this.filterDialog)}editAttendence(t){this.editAttendenceForm.patchValue({id:t.id}),1==t.onLeave?(console.log("in true filed"),this.editAttendenceForm.patchValue({onLeave:"true"}),console.log(this.editAttendenceForm.value.onLeave)):this.editAttendenceForm.patchValue({onLeave:"false"}),this.productDialogForEdit=!0,this.getAttendances(this.eventa)}getAttendence(){console.log("coming.............."),this.conveyanceService.getRideSummary(this.eventa).subscribe(t=>{this.conveyanceSummary=t.content,this.totalRecords=t.totalElements})}onSelectMethod(t){let o=new Date(Date.parse(t));this.addAttendenceForm.value.dateCreated=`${o.getMonth()+1}/${o.getDate()}/${o.getFullYear()}`}getAttendances(t){this.conveyanceSummary=[],this.eventa.page=t.page,this.eventa.rows=t.rows,console.log("in page check"),console.log("page",t.page),console.log("Row",t.rows),this.conveyanceService.getRideSummary(this.eventa).subscribe(o=>{this.conveyanceSummary=o.content,console.log(o),this.totalRecords=o.totalElements}),console.log("event data",t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.ez),e.Y36(w.J),e.Y36(M.b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-conveyance-summary"]],decls:40,vars:27,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-3"],[1,"text-align:","center","col-12","ml-10"],[1,"mb-4","font-family:","Open","Sans,","sans-serif;"],[1,"row","red"],[1,"ml-4"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-2","ml-4"],["htmlFor","firstname2"],["inputId","dob","dateFormat","dd/mm/yy",1,"ng-invalid",3,"ngModel","showIcon","onSelect","ngModelChange"],[1,"field","col-12","md:col-2"],["htmlFor","middlename"],["htmlFor","lastname"],["optionValue","name","defaultLabel","Select a Branch","optionLabel","name","display","chip",3,"ngModel","options","ngModelChange","onChange","onDeselect"],[1,"field","col-12","md:col-1","mt-4"],["pButton","","pRipple","","icon","pi pi-filter-slash","pTooltip","Clear All Filters",1,"p-button-rounded","p-button-outline","mr-3",3,"click"],[1,"field","col-12","md:col-2","ml-8","mt-4"],[1,"mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",1,"w-full","sm:w-auto","mr-3",3,"input"],[1,"mt-3"],["scrollDirection","both","responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","selectionMode","multiple","dataKey","id",3,"value","rows","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","selection","rowHover","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"rows","showCurrentPageReport","totalRecords","rowsPerPageOptions","onPageChange"],["header","Attendence Details",1,"p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["rowspan","4",2,"width","14%","min-width","12rem"],[1,"flex","justify-content-between","align-items-center"],["rowspan","4",2,"width","14% min-width 12rem align-items-center"],[1,"flex","justify-content-between","align-items-center","ml-10"],["rowspan","4",2,"width","14% min-width 10rem"],["rowspan","5"],["width","100","height","100",3,"ngClass"],[3,"formGroup"],["width","150",1,"mt-0","mx-auto","mb-5","block","shadow-2",3,"src"],[1,"field"],["for","onLeave"],["formControlName","onLeave","optionLabel","label","optionValue","value",3,"options"],["style","color:red",4,"ngIf"],[2,"color","red"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"p-toast"),e.TgZ(4,"p-toolbar",3)(5,"div",4)(6,"h4",5),e._uU(7,"Conveyance Summary"),e.qZA()(),e.TgZ(8,"div",6)(9,"h5",7),e._uU(10,"Filters"),e.qZA(),e.TgZ(11,"div",8)(12,"div",9)(13,"label",10),e._uU(14,"From"),e.qZA(),e.TgZ(15,"p-calendar",11),e.NdJ("onSelect",function(r){return o.dateFromFilter(r)})("ngModelChange",function(r){return o.dateFromFilterVariable=r}),e.qZA()(),e.TgZ(16,"div",12)(17,"label",13),e._uU(18,"To"),e.qZA(),e.TgZ(19,"p-calendar",11),e.NdJ("onSelect",function(r){return o.dateToFilter(r)})("ngModelChange",function(r){return o.dateToFilterVariable=r}),e.qZA()(),e.TgZ(20,"div",12)(21,"label",14),e._uU(22,"Branch"),e.qZA(),e.TgZ(23,"p-multiSelect",15),e.NdJ("ngModelChange",function(r){return o.eventa.branch=r})("onChange",function(r){return o.branchFilter(r)})("onDeselect",function(r){return o.branchFilter(r)}),e.qZA()(),e.TgZ(24,"div",16)(25,"button",17),e.NdJ("click",function(){return o.clearAllFilters()}),e.qZA()(),e._UZ(26,"div",12),e.TgZ(27,"div",18)(28,"span",19),e._UZ(29,"i",20),e.TgZ(30,"input",21),e.NdJ("input",function(r){return o.forSearch(r)}),e.qZA()()()()()(),e.TgZ(31,"p-card",22)(32,"p-table",23,24),e.NdJ("selectionChange",function(r){return o.selectedAttendence=r}),e.YNc(34,D,21,0,"ng-template",25),e.YNc(35,_,13,10,"ng-template",26),e.qZA()(),e.TgZ(36,"p-paginator",27),e.NdJ("onPageChange",function(r){return o.getAttendances(r)}),e.qZA(),e.TgZ(37,"p-dialog",28),e.NdJ("visibleChange",function(r){return o.productDialogForEdit=r}),e.YNc(38,N,7,4,"ng-template",29),e.YNc(39,J,0,0,"ng-template",30),e.qZA()()()()),2&t&&(e.xp6(15),e.Q6J("ngModel",o.dateFromFilterVariable)("showIcon",!1),e.xp6(4),e.Q6J("ngModel",o.dateToFilterVariable)("showIcon",!1),e.xp6(4),e.Q6J("ngModel",o.eventa.branch)("options",o.branchList),e.xp6(9),e.Q6J("value",o.conveyanceSummary)("rows",10)("globalFilterFields",e.DdM(23,I))("rows",10)("paginator",!1)("rowsPerPageOptions",e.DdM(24,P))("showCurrentPageReport",!0)("selection",o.selectedAttendence)("rowHover",!0),e.xp6(4),e.Q6J("rows",10)("showCurrentPageReport",!0)("totalRecords",o.totalRecords)("rowsPerPageOptions",e.DdM(25,R)),e.xp6(1),e.Akn(e.DdM(26,O)),e.Q6J("visible",o.productDialogForEdit)("modal",!0))},dependencies:[c.mk,c.O5,l._Y,l.JJ,l.JL,l.On,l.sg,l.u,p.o,g.Hq,h.H,v.o,y.Z,u.jx,f.FN,C.iA,S.f,T.V,Z.D,A.UN,F.NU,b.u],styles:["[_nghost-%COMP%]     .red{background-color:#f0f8ff}[_nghost-%COMP%]     .p-toolbar{display:contents!important}"]}),n})(),V=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[m.Bz.forChild([{path:"",component:q}]),m.Bz]}),n})();var Y=a(520),B=a(8850);let x=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,V,l.u5,l.UX,p.V,g.hJ,h.T,v.j,y.d,f.EV,C.U$,S._8,Y.JF,T.S,Z.U,A.Qy,B.$,F.q4,b.z]}),n})()}}]);