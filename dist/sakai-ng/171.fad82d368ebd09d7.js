"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[171],{3171:(V,c,a)=>{a.r(c),a.d(c,{AttendanceSummaryModule:()=>L});var d=a(9808),m=a(2047),r=a(2382),e=a(1223),g=a(9783),w=a(7476),C=a(5742),p=a(4534),u=a(845),h=a(5787),v=a(1424),f=a(4297),y=a(7773),A=a(8952),S=a(5652),T=a(4132),Z=a(6526),F=a(4119);function M(o,s){1&o&&(e.TgZ(0,"tr")(1,"th",28)(2,"div",29),e._uU(3," Employee Code "),e.qZA()(),e.TgZ(4,"th",28)(5,"div",29),e._uU(6," Staff Name "),e.qZA()(),e.TgZ(7,"th",30)(8,"div",31),e._uU(9," Branch "),e.qZA()(),e.TgZ(10,"th",32)(11,"div",29),e._uU(12," Leaves Taken "),e.qZA()(),e.TgZ(13,"th",28)(14,"div",29),e._uU(15," Comp Off "),e.qZA()(),e.TgZ(16,"th",28)(17,"div",29),e._uU(18," Total working days "),e.qZA()(),e._UZ(19,"th",33),e.qZA(),e._UZ(20,"tr"))}function b(o,s){if(1&o&&(e.TgZ(0,"tr",34)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA()()),2&o){const t=s.$implicit;e.xp6(2),e.Oqu(t.empCode),e.xp6(2),e.Oqu(t.empName),e.xp6(2),e.Oqu(t.branch),e.xp6(2),e.Oqu(t.leavesTaken),e.xp6(2),e.Oqu(t.companyOff),e.xp6(2),e.Oqu(t.workingDays)}}const D=function(){return["Date","employeeCode","Staff_Name","In","Out","status"]},U=function(){return[10,20,30]},O=function(){return[10,20,30,50]};let P=(()=>{class o{constructor(t,n,i){this.messageService=t,this.attendenceService=n,this.branchService=i,this.submitted=!1,this.productDialog=!1,this.productDialogForEdit=!1,this.deleteProductDialog=!1,this.deleteProductsDialog=!1,this.attendenceObjectForSelectedDelete="",this.ids=new Array,this.eventa={page:0,rows:10,searchString:"",sortBy:"id",sortOrder:"ascending",branch:[],role:"",conveyanceApplicable:"",dateFrom:(0,d.p6)(new Date((new Date).getFullYear(),(new Date).getMonth(),1),"yyyy-MM-dd","en-US"),dateTo:(0,d.p6)(new Date,"yyyy-MM-dd","en-US"),onLeave:""},this.branchList=[],this.filterDialog=!1}ngOnInit(){this.dateFromFilterVariable=new Date((new Date).getFullYear(),(new Date).getMonth(),1),this.dateToFilterVariable=new Date,this.getAttendances(this.eventa),this.branchService.getBranchList2().subscribe(t=>{this.branchList=t,console.log(this.branchList),console.log("response",t)}),this.leave=[{label:"On Leave",value:"true"},{label:"Present",value:"false"}],this.editAttendenceForm=new r.cw({id:new r.NI(""),startTime:new r.NI("",[r.kI.required]),endTime:new r.NI("",[r.kI.required]),onLeave:new r.NI("",[r.kI.required]),reasonForLeave:new r.NI("",[r.kI.required]),employeeAttendance:new r.NI("",[r.kI.required]),dateCreated:new r.NI("",[r.kI.required]),lastUpdated:new r.NI("",[r.kI.required])})}clearAllFilters(){this.eventa.branch=[],this.eventa.dateFrom=(0,d.p6)(new Date((new Date).getFullYear(),(new Date).getMonth(),1),"yyyy-MM-dd","en-US"),this.eventa.dateTo=(0,d.p6)(new Date,"yyyy-MM-dd","en-US"),this.eventa.onLeave="",this.getAttendances(this.eventa),this.dateFromFilterVariable=new Date((new Date).getFullYear(),(new Date).getMonth(),1),this.dateToFilterVariable=new Date,this.branchFilterVariable="",this.leaveFilterVariable=""}forSearch(t){this.eventa.searchString=t.target.value,this.getAttendances(this.eventa)}branchFilter(t){console.log(t),this.getAttendances(this.eventa)}dateToFilter(t){this.eventa.dateTo=(0,d.p6)(t,"yyyy-MM-dd","en-US"),console.log(this.eventa),console.log(t),this.getAttendances(this.eventa),console.log(this.eventa)}dateFromFilter(t){this.eventa.dateFrom=(0,d.p6)(t,"yyyy-MM-dd","en-US"),console.log(this.eventa),console.log(t),this.getAttendances(this.eventa)}leaveFilter(t){this.eventa.onLeave=t.value.value,this.getAttendances(this.eventa),console.log(t)}hideOrShowFilter(){this.filterDialog=!this.filterDialog,console.log(this.filterDialog)}getAttendence(){console.log("coming.............."),this.attendenceService.getAttendanceSummary(this.eventa).subscribe(t=>{this.attendences=t.content,this.totalRecords=t.totalElements})}onSelectMethod(t){let n=new Date(Date.parse(t));this.addAttendenceForm.value.dateCreated=`${n.getMonth()+1}/${n.getDate()}/${n.getFullYear()}`}getAttendances(t){this.attendences=[],this.eventa.page=t.page,this.eventa.rows=t.rows,console.log("in page check"),console.log("page",t.page),console.log("Row",t.rows),this.attendenceService.getAttendanceSummary(this.eventa).subscribe(n=>{this.attendences=n.content,console.log(n),this.totalRecords=n.totalElements}),console.log("event data",t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.ez),e.Y36(w.d),e.Y36(C.b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-attendance-summary"]],decls:37,vars:21,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-3"],[1,"text-align:","center","col-12","ml-10"],[1,"mb-4","font-family:","Open","Sans,","sans-serif;"],[1,"row","red"],[1,"ml-4"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-2","ml-4"],["htmlFor","firstname2"],["inputId","dob","dateFormat","dd/mm/yy",1,"ng-invalid",3,"ngModel","showIcon","onSelect","ngModelChange"],[1,"field","col-12","md:col-2"],["htmlFor","middlename"],["htmlFor","lastname"],["optionValue","name","defaultLabel","Select a Branch","optionLabel","name","display","chip",3,"options","ngModel","ngModelChange","onChange","onDeselect"],[1,"field","col-12","md:col-1","mt-4"],["pButton","","pRipple","","pTooltip","Clear All Filters","icon","pi pi-filter-slash",1,"p-button-rounded","p-button-outline","mr-3",3,"click"],[1,"field","col-12","md:col-2","ml-8","mt-4"],[1,"mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",1,"w-full","sm:w-auto","mr-3",3,"input"],[1,"mt-3"],["scrollDirection","both","responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","selectionMode","multiple","dataKey","id",3,"value","rows","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","rowHover"],["dt",""],["pTemplate","header"],["pTemplate","body"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"rows","showCurrentPageReport","totalRecords","rowsPerPageOptions","onPageChange"],["rowspan","4",2,"width","14%","min-width","12rem"],[1,"flex","justify-content-between","align-items-center"],["rowspan","4",2,"width","14% min-width 12rem align-items-center"],[1,"flex","justify-content-between","align-items-center","ml-10"],["rowspan","4",2,"width","14% min-width 12rem"],["rowspan","5"],["width","100","height","100"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"p-toast"),e.TgZ(4,"p-toolbar",3)(5,"div",4)(6,"h4",5),e._uU(7,"Attendence Summary"),e.qZA()(),e.TgZ(8,"div",6)(9,"h5",7),e._uU(10,"Filters"),e.qZA(),e.TgZ(11,"div",8)(12,"div",9)(13,"label",10),e._uU(14,"From"),e.qZA(),e.TgZ(15,"p-calendar",11),e.NdJ("onSelect",function(l){return n.dateFromFilter(l)})("ngModelChange",function(l){return n.dateFromFilterVariable=l}),e.qZA()(),e.TgZ(16,"div",12)(17,"label",13),e._uU(18,"To"),e.qZA(),e.TgZ(19,"p-calendar",11),e.NdJ("onSelect",function(l){return n.dateToFilter(l)})("ngModelChange",function(l){return n.dateToFilterVariable=l}),e.qZA()(),e.TgZ(20,"div",12)(21,"label",14),e._uU(22,"Branch"),e.qZA(),e.TgZ(23,"p-multiSelect",15),e.NdJ("ngModelChange",function(l){return n.eventa.branch=l})("onChange",function(l){return n.branchFilter(l)})("onDeselect",function(l){return n.branchFilter(l)}),e.qZA()(),e.TgZ(24,"div",16)(25,"button",17),e.NdJ("click",function(){return n.clearAllFilters()}),e.qZA()(),e._UZ(26,"div",12),e.TgZ(27,"div",18)(28,"span",19),e._UZ(29,"i",20),e.TgZ(30,"input",21),e.NdJ("input",function(l){return n.forSearch(l)}),e.qZA()()()()()(),e.TgZ(31,"p-card",22)(32,"p-table",23,24),e.YNc(34,M,21,0,"ng-template",25),e.YNc(35,b,13,6,"ng-template",26),e.qZA()(),e.TgZ(36,"p-paginator",27),e.NdJ("onPageChange",function(l){return n.getAttendances(l)}),e.qZA()()()()),2&t&&(e.xp6(15),e.Q6J("ngModel",n.dateFromFilterVariable)("showIcon",!1),e.xp6(4),e.Q6J("ngModel",n.dateToFilterVariable)("showIcon",!1),e.xp6(4),e.Q6J("options",n.branchList)("ngModel",n.eventa.branch),e.xp6(9),e.Q6J("value",n.attendences)("rows",10)("globalFilterFields",e.DdM(18,D))("rows",10)("paginator",!1)("rowsPerPageOptions",e.DdM(19,U))("showCurrentPageReport",!0)("rowHover",!0),e.xp6(4),e.Q6J("rows",10)("showCurrentPageReport",!0)("totalRecords",n.totalRecords)("rowsPerPageOptions",e.DdM(20,O)))},dependencies:[r.JJ,r.On,p.o,u.Hq,h.H,v.o,f.Z,g.jx,y.FN,A.iA,S.f,T.D,Z.NU,F.u],styles:["[_nghost-%COMP%]     .red{background-color:#f0f8ff}[_nghost-%COMP%]     .p-toolbar{display:contents!important}tr.OnLeave[_ngcontent-%COMP%]{color:red}tr.Present[_ngcontent-%COMP%]{color:#000}"]}),o})(),I=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.Bz.forChild([{path:"",component:P}]),m.Bz]}),o})();var N=a(520),R=a(5315),q=a(8850),J=a(7102);let L=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.ez,I,r.u5,r.UX,p.V,u.hJ,h.T,v.j,f.d,y.EV,A.U$,S._8,N.JF,R.S,T.U,J.Qy,q.$,Z.q4,F.z]}),o})()}}]);